var maia_colour = "#354A54";
// var maia_colour = "rgb(89,21,126)";
// var sf_colour = "rgb(33,145,141)";
var sf_colour = "rgb(150,150,150)";
// var leela_colour = "rgb(112,124,144)";
var leela_colour = "rgb(150,150,150)";

Chart.defaults.global.defaultFontColor = '#222';

var image_downloads = {};

var leela_dash = [12, 5];
var sf_dash = [5, 2];

function draw_main_bar_plot() {
    var ctx = document.getElementById('maia_bars').getContext('2d');
    main_chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Stockfish', 'Leela', 'Maia'],
            datasets: [{
                label: 'Accuracy',
                data: [38.718, 44.512, 51.802],
                backgroundColor: [
                    sf_colour,
                    leela_colour,
                    maia_colour,
                ],
                borderColor: [
                    sf_colour,
                    leela_colour,
                    maia_colour,
                ],
                borderWidth: 1
            }]
        },
        options: {
            tooltips: {
                enabled : false,
            },
            legend: {
                display: false,
            },
            scales: {
                xAxes: [{
                    scaleLabel: {
                        display: false,
                        labelString: 'Model',
                    },
                }],
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Move-matching Accuracy',
                    },
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    });
}

maia_data = { "labels": [1100.0, 1200.0, 1300.0, 1400.0, 1500.0, 1600.0, 1700.0, 1800.0, 1900.0], "datasets": [{ "label": "Maia 1100", "borderColor": "rgb(255,169,115)", "fill": false, "data": [0.5048074118399252, 0.5083059781885401, 0.5082787965863198, 0.507637761088173, 0.5013122208595301, 0.49452090675439747, 0.4893443090172237, 0.48142151026523305, 0.4698201070306627] }, { "label": "Maia 1200", "borderColor": "rgb(251,126,94)", "fill": false, "data": [0.5020216499266548, 0.507977859929808, 0.5106949336808481, 0.5122040177832533, 0.5077720135254498, 0.5033330544277346, 0.4984017811804643, 0.49167662496328424, 0.48095094421477974] }, { "label": "Maia 1300", "borderColor": "rgb(234,84,98)", "fill": false, "data": [0.5004054099282063, 0.5074135941573503, 0.513430435448625, 0.5178513684169607, 0.5151151628561154, 0.5125960593162312, 0.5095296253211575, 0.5033572969403333, 0.4930969033748744] }, { "label": "Maia 1400", "borderColor": "rgb(201,62,115)", "fill": false, "data": [0.4951343466982289, 0.5037768880644409, 0.5117223794659531, 0.5174258796074958, 0.517839759352277, 0.5164825324093213, 0.5163913560964236, 0.512939282435357, 0.5039409911358695] }, { "label": "Maia 1500", "borderColor": "rgb(164,49,127)", "fill": false, "data": [0.48816516447031866, 0.4986811958712656, 0.5087234000219635, 0.5159154447846614, 0.5180198903232942, 0.5211444221709924, 0.5223609519150252, 0.5206646615851956, 0.5135550267103153] }, { "label": "Maia 1600", "borderColor": "rgb(127,36,130)", "fill": false, "data": [0.4804842229339774, 0.49091249215440574, 0.500602966525224, 0.510660866526968, 0.5165327932560058, 0.5203332968601087, 0.524587301448455, 0.5252206254115427, 0.5209950480443453] }, { "label": "Maia 1700", "borderColor": "rgb(89,21,126)", "fill": false, "data": [0.4731351613787744, 0.4839965368121106, 0.4940926299682128, 0.5051077363667418, 0.5116224799639787, 0.5181430392520056, 0.5244884855842772, 0.5270494837456026, 0.5249450695484232] }, { "label": "Maia 1800", "borderColor": "rgb(51,16,103)", "fill": false, "data": [0.4645958032363057, 0.4759339515650206, 0.48766256858944684, 0.4979323645107661, 0.5048018736080323, 0.5136212097615396, 0.5216880632010754, 0.5265327619702365, 0.5279997436153431] }, { "label": "Maia 1900", "borderColor": "rgb(18,13,50)", "fill": false, "data": [0.4588842110530762, 0.47021509599596145, 0.4806254452171544, 0.49231466377875394, 0.49955249014944375, 0.5087540887283014, 0.5185930433910383, 0.5257298732935858, 0.528688411823979] }] }

var sf_data = { "labels": [1100.0, 1200.0, 1300.0, 1400.0, 1500.0, 1600.0, 1700.0, 1800.0, 1900.0], "datasets": [{ "label": "Stockfish D01", "borderColor": "rgb(122,210,81)", "fill": false, "borderDash": sf_dash, "data": [0.3654861257856972, 0.36983081491387276, 0.37268101165255996, 0.37948564892876513, 0.3796764814441306, 0.38423736234859457, 0.38763719141438135, 0.39039817800739823, 0.3911048670198326] }, { "label": "Stockfish D03", "borderColor": "rgb(68,192,113)", "fill": false, "borderDash": sf_dash, "data": [0.3459004107455721, 0.34753895660874395, 0.3483954802183432, 0.3519699206721526, 0.35244463737845455, 0.3523614805799236, 0.3563379831360424, 0.3576338593439617, 0.3588613580795284] }, { "label": "Stockfish D05", "borderColor": "rgb(34,169,133)", "fill": false, "borderDash": sf_dash, "data": [0.3383978943914278, 0.3388772332151378, 0.3421538044303211, 0.3452837000038707, 0.3465137206173752, 0.3471441720811213, 0.3506418165693719, 0.3532589697334552, 0.3544177667758171] }, { "label": "Stockfish D07", "borderColor": "rgb(33,145,141)", "fill": false, "borderDash": sf_dash, "data": [0.34722110177952265, 0.35168327871041355, 0.355973668943746, 0.3612291481806772, 0.3631459176836633, 0.36656858611397636, 0.370524715029776, 0.37438285855876524, 0.37843774474223946] }, { "label": "Stockfish D09", "borderColor": "rgb(42,121,143)", "fill": false, "borderDash": sf_dash, "data": [0.35807315853228167, 0.3624462156559346, 0.3671708972626308, 0.373901268462834, 0.3769607209055899, 0.3821012905704176, 0.38605071993609114, 0.39156792998398204, 0.39751264063962877] }, { "label": "Stockfish D11", "borderColor": "rgb(53,95,142)", "fill": false, "borderDash": sf_dash, "data": [0.3615716772793315, 0.36710054599159586, 0.37313517732909135, 0.3801624003037061, 0.3838300992761501, 0.3893023830681315, 0.3939886845667689, 0.3984637798346045, 0.4061096155881164] }, { "label": "Stockfish D13", "borderColor": "rgb(65,68,136)", "fill": false, "borderDash": sf_dash, "data": [0.3628701167202338, 0.3686213298532446, 0.37345801982225746, 0.38156729452412463, 0.38544056069429156, 0.39108453598021947, 0.3965787439015668, 0.40224286451245495, 0.4092685858070651] }, { "label": "Stockfish D15", "borderColor": "rgb(72,36,117)", "fill": false, "borderDash": sf_dash, "data": [0.3641735320345914, 0.3708411158776104, 0.37489234580951364, 0.38279161195191824, 0.38717989516191786, 0.3923861677559097, 0.3979229243128041, 0.4040044810344391, 0.4113250316803383] }] };
var leela_data = { "labels": [1100.0, 1200.0, 1300.0, 1400.0, 1500.0, 1600.0, 1700.0, 1800.0, 1900.0], "datasets": [{ "label": "Leela  0800", "borderColor": "rgb(149,175,181)", "fill": false, "borderDash": leela_dash, "data": [0.2357197265389274, 0.22727532900491268, 0.2217132724817373, 0.21819477671266285, 0.21289089523709165, 0.20669521707980493, 0.20355820993633875, 0.2000559093441196, 0.19386536470220014] }, { "label": "Leela  1000", "borderColor": "rgb(131,149,163)", "fill": false, "borderDash": leela_dash, "data": [0.26332567324437384, 0.25612186805680964, 0.25040130480139156, 0.24638247693597848, 0.24064183009936424, 0.23508988794895813, 0.23160965054379637, 0.2278074485736247, 0.22136111676051334] }, { "label": "Leela  1600", "borderColor": "rgb(112,124,144)", "fill": false, "borderDash": leela_dash, "data": [0.3142836812685672, 0.3098571755540558, 0.30489071074937496, 0.3022202853157198, 0.29774741581725234, 0.29267158680965805, 0.28899485497729865, 0.28450383387852607, 0.2789705791159399] }, { "label": "Leela  1800", "borderColor": "rgb(93,97,125)", "fill": false, "borderDash": leela_dash, "data": [0.33616734702722445, 0.33109515471741063, 0.326392797303048, 0.32201645074309904, 0.3178897013527892, 0.31381642655013037, 0.3085752978941418, 0.30475590550845044, 0.29815322098216845] }, { "label": "Leela  2200", "borderColor": "rgb(75,75,104)", "fill": false, "borderDash": leela_dash, "data": [0.3711707929062485, 0.36793103143907757, 0.3656355595446294, 0.3624769209655476, 0.35987846518230887, 0.3560429509544291, 0.35287891443414193, 0.35009679495343815, 0.3438181098241284] }, { "label": "Leela  2700", "borderColor": "rgb(56,56,78)", "fill": false, "borderDash": leela_dash, "data": [0.39991936307835446, 0.4020750436386233, 0.40228226269111256, 0.4028613406965706, 0.40252911430990335, 0.40144357722799734, 0.4026744837540036, 0.4024393875192802, 0.399429533080264] }, { "label": "Leela  2900", "borderColor": "rgb(37,37,51)", "fill": false, "borderDash": leela_dash, "data": [0.41292853631183185, 0.4171650808603375, 0.41970009841999695, 0.4229524638870487, 0.4235924050608663, 0.42484574737946107, 0.42717641628191655, 0.4275887502667512, 0.42583190604304844] }, { "label": "Leela  3200", "borderColor": "rgb(18,18,26)", "fill": false, "borderDash": leela_dash, "data": [0.42201681882696235, 0.4301156918608111, 0.4355404939240674, 0.44222993725289234, 0.4451176251634652, 0.4501002460435623, 0.4540849287256814, 0.45765637440322315, 0.4599611691580362] }] };

var data_delta = { "labels": [-0.3, -0.29, -0.28, -0.27, -0.26, -0.25, -0.24, -0.23, -0.22, -0.21, -0.2, -0.19, -0.18, -0.17, -0.16, -0.15, -0.14, -0.13, -0.12, -0.11, -0.1, -0.09, -0.08, -0.07, -0.06, -0.05, -0.04, -0.03, -0.02, -0.01, -0.0], "datasets": [{ "label": "Leela  1000", "borderColor": "rgb(160,189,192)", "fill": false, "borderDash": leela_dash, "data": [0.13311661248645495, 0.13304792802434864, 0.13302486986697512, 0.12755441497956468, 0.13083065188892862, 0.1307736946940824, 0.12954418043037647, 0.12899285982713266, 0.1301676144568714, 0.1340227841964935, 0.1343371681211083, 0.1426071993347657, 0.1497090653725092, 0.15866708844156746, 0.16662982099319093, 0.18759607425801111, 0.18239302204071187, 0.19478930164404296, 0.2342952056271594, 0.22472347969357634, 0.24623867595818816, 0.27594093471758224, 0.2830408182212631, 0.31312874530779433, 0.3344967283040464, 0.3388162778845652, 0.32302189653668323, 0.3577213521302978, 0.37778292464028257, 0.40016966914516694, 0.4207276736493936] }, { "label": "Leela  1600", "borderColor": "rgb(128,146,160)", "fill": false, "borderDash": leela_dash, "data": [0.15395515545553054, 0.158266162747918, 0.15552342394447657, 0.15561733675506131, 0.15580979621022525, 0.1616869775247416, 0.15971653226386073, 0.16078810329092177, 0.16173848957762751, 0.1679243758584471, 0.17438832434434387, 0.18446793272673964, 0.19763176705165345, 0.20662983851679256, 0.21527558458292803, 0.23929634228055655, 0.234493127605805, 0.24939012608086567, 0.29445925463691575, 0.286434250962117, 0.31088675958188156, 0.34509678589917087, 0.3566019110271534, 0.3914534715659, 0.4143227265166658, 0.41469199067404505, 0.40116461659251507, 0.43871623584083647, 0.462754407805217, 0.47986426468386645, 0.5037486218302095] }, { "label": "Leela  2200", "borderColor": "rgb(96,101,128)", "fill": false, "borderDash": leela_dash, "data": [0.1752521463699258, 0.17796581825479113, 0.1796414112203586, 0.18004467255964263, 0.17971636276963412, 0.1880675669317273, 0.18707145629393246, 0.18985880710796157, 0.19477337688852592, 0.20422557970429023, 0.21263975370940488, 0.2285348983643119, 0.2459651630864151, 0.2578947774494449, 0.2670700741545497, 0.298187398998857, 0.29150894104349495, 0.31136780831843874, 0.3586947045787201, 0.35517160613978055, 0.3839668989547038, 0.41759840468474047, 0.43333857542645693, 0.4695772863419144, 0.491664998632682, 0.4873172630489131, 0.4720448399197418, 0.5118411939498202, 0.5444688920413422, 0.5608563301561954, 0.5669239250275634] }, { "label": "Leela  2700", "borderColor": "rgb(64,64,89)", "fill": false, "borderDash": leela_dash, "data": [0.18021171959656582, 0.1868289909361517, 0.18328513591671486, 0.1887653264898774, 0.19151471815039925, 0.19962671936510923, 0.20041111446519183, 0.2047028507005959, 0.2130685496320051, 0.22353559020764321, 0.23826416055183908, 0.2640316851480675, 0.2932075542680862, 0.308484619361011, 0.3191456435781149, 0.3547209412321154, 0.3459949243450166, 0.3721659984219764, 0.42127375812330137, 0.417948479794533, 0.44547735191637633, 0.4761976100233205, 0.4928691744082277, 0.529694922064796, 0.5512941594377363, 0.5409655814476098, 0.5258745529093606, 0.5651321521928551, 0.6008511623867289, 0.6153001646788762, 0.6206174200661522] }, { "label": "Leela  3200", "borderColor": "rgb(32,32,44)", "fill": false, "borderDash": leela_dash, "data": [0.17100108360423438, 0.18070838489581592, 0.185106998264893, 0.18969204448246366, 0.1890358717673698, 0.19951693094308254, 0.20189170152514843, 0.2096821817791378, 0.21915366152436536, 0.2356225256524198, 0.25910279854632995, 0.297538536965205, 0.3505354701980111, 0.37204789716922176, 0.3846498818832982, 0.4252123487446297, 0.40977383478529766, 0.4462324686408064, 0.4934501222796786, 0.4860740375801091, 0.5147073170731707, 0.5383439948465192, 0.556986920661868, 0.5922542473302349, 0.6105201728741024, 0.5936146903855183, 0.5755168803978016, 0.6160325297705489, 0.6540777626588692, 0.6705424422376366, 0.6773980154355016] }, { "label": "Maia 1100", "borderColor": "rgb(249,118,93)", "fill": false, "data": [0.25177127615237144, 0.25449011672631194, 0.25728744939271253, 0.2594572759243418, 0.26592777976403287, 0.27293401715836196, 0.2738079836704184, 0.2788291190207763, 0.2861496479399257, 0.29811747596348065, 0.3132103423531863, 0.33932236465798593, 0.377807456453858, 0.39559528126470744, 0.4052034512815978, 0.4331249260967246, 0.4240544459965238, 0.4513348791523759, 0.49177843136355226, 0.48295447662045543, 0.5077665505226481, 0.5302742031330367, 0.5483128354860652, 0.5838856690659872, 0.6054540482480004, 0.5960063724683684, 0.5910320160516445, 0.6327498380214035, 0.6648475724501317, 0.6635560656719397, 0.6658213891951489] }, { "label": "Maia 1300", "borderColor": "rgb(212,67,110)", "fill": false, "data": [0.24985413019921648, 0.2529516037325663, 0.2590803932909196, 0.2595047999239616, 0.26497437730902157, 0.2756787277090293, 0.2777897566374862, 0.2826810543834219, 0.2926928860958679, 0.30736850610002425, 0.32650285873012197, 0.3547035044965801, 0.39878735437593266, 0.4159369189343497, 0.42553594663904293, 0.4547490244767648, 0.44550601934293727, 0.47293005168832425, 0.5135425317628921, 0.5041836442125582, 0.5295592334494773, 0.5506367778094045, 0.568270052427247, 0.6041756786400343, 0.6236323295997565, 0.6118853758271569, 0.6068393963185903, 0.6486516678209969, 0.6798008164210648, 0.6806726882578971, 0.6814773980154355] }, { "label": "Maia 1500", "borderColor": "rgb(152,45,128)", "fill": false, "data": [0.24714511961323665, 0.24860363222850262, 0.25746096009253905, 0.2582454139340367, 0.26344893338100345, 0.2747063159710786, 0.2783791165351388, 0.2845197831105385, 0.2965272037367168, 0.3125555465783308, 0.3346450313650147, 0.3674554307440146, 0.4137541853203416, 0.43142943114396154, 0.44181647064768376, 0.4722591738599188, 0.460647679167422, 0.4912081541954495, 0.5294350663552703, 0.5208879340631827, 0.5462717770034843, 0.5652482942411183, 0.5823687566197215, 0.6164435797505827, 0.6365020340617238, 0.6211551503429014, 0.6133603768646951, 0.6566612301436583, 0.6895428621059031, 0.692150306901542, 0.6897464167585446] }, { "label": "Maia 1700", "borderColor": "rgb(95,24,128)", "fill": false, "data": [0.23447528548803867, 0.24485768754807852, 0.24930595720069404, 0.249500998003992, 0.2566082707662972, 0.26767985696137014, 0.2717811606077594, 0.2815402372899554, 0.2940174685536157, 0.3115860063020118, 0.3378683363811023, 0.3726273390147419, 0.42522541163487704, 0.44286364583252963, 0.45192902891648457, 0.48386445153915886, 0.4714067881553833, 0.5031681239231599, 0.5392939132403121, 0.5306847688698103, 0.5549825783972125, 0.5724408623091789, 0.5882689534824235, 0.6208000787244992, 0.6387686808059564, 0.622800434997211, 0.6136787926371805, 0.6541421836948994, 0.6897744709186184, 0.6915514746244823, 0.6941565600882028] }, { "label": "Maia 1900", "borderColor": "rgb(35,18,81)", "fill": false, "data": [0.22059681587063432, 0.229138098264156, 0.23661075766338924, 0.2392833380857333, 0.24671672029555475, 0.257987107702442, 0.2619201632958155, 0.2722392226338111, 0.2845661245505881, 0.3039993536398158, 0.3335281590703919, 0.37400683499401577, 0.43086227004251154, 0.44753531721844597, 0.45845387132227544, 0.49198642150486777, 0.4773115023298962, 0.5110340885303447, 0.5473816548363563, 0.5371964737855923, 0.561794425087108, 0.5776193115708629, 0.5919977869524934, 0.6245640938379629, 0.6411875650180853, 0.6242209978450783, 0.6132905871063421, 0.6544661408878661, 0.6909180394314004, 0.6980887269823843, 0.7067254685777288] }] };




collected_data = {
    "labels": [1100.0, 1200.0, 1300.0, 1400.0, 1500.0, 1600.0, 1700.0, 1800.0, 1900.0],
    "datasets": [
        maia_data['datasets'][0],
        maia_data['datasets'][4],
        maia_data['datasets'][8],
        sf_data['datasets'][0],
        sf_data['datasets'][2],
        sf_data['datasets'][5],
        sf_data['datasets'][7],
        leela_data['datasets'][3],
        leela_data['datasets'][5],
        leela_data['datasets'][7],
    ]
};

var axis_font_size = $(window).width() < 800 ? 16 : 20;
var axis_ticks_size = $(window).width() < 800 ? 12 : 16;

var line_plt_options = {
    aspectRatio: $(window).width() < 800 ? .7 : 1.2,
    tooltips: {
        enabled: false,
    },
    legend: {
        display: true,
        position: 'bottom',
        labels: {
            fontSize: $(window).width() < 800 ? 12 : 16,
            boxWidth: 20,
            useLineStyle: true
        },
    },
    scales: {
        xAxes: [{
            scaleLabel: {
                display: true,
                labelString: 'Rating of player being predicted',
                fontSize: axis_font_size,
            },
            gridLines: {
                display: false,
            },
            ticks: {
                fontSize: axis_ticks_size,
            },
        }],
        yAxes: [{
            scaleLabel: {
                display: true,
                labelString: 'Move-matching Accuracy',
                fontSize: axis_font_size,
            },

            ticks: {
                fontSize: axis_ticks_size,
                //min: .33,
                //max: .53,
            },
            gridLines: {
                display: true,
            }
        }]
    }
}

function draw_main_line_plot(data_set, canvas_id, is_delta) {
    ctx = document.getElementById(canvas_id).getContext('2d'); //'maia_lines'
    config = {
        type: 'line',
        data: data_set,
        options: line_plt_options
    };
    if (is_delta) {
        config.options.scales.xAxes[0].scaleLabel.labelString ='Move quality relative to optimal move';
        if ($(window).width() < 800) {
            config.options.scales.xAxes[0].scaleLabel.fontSize = 16;
            if ($(window).width() < 400) {
                config.options.scales.xAxes[0].scaleLabel.fontSize = 12;
            }
        }
    }
    lineChart = new Chart(ctx, config);
}

